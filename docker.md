## Docker Interview Questions & Answers

#### 1. Docker container will get reboot failure what you will do if it won't work ?
**Answer.** If a Docker container faces reboot failure, I would first investigate the container logs using the docker logs command to identify any error messages or issues. I might also check the container's configuration and dependencies. If the problem persists, I may try restarting the Docker daemon, updating Docker, or recreating the container with proper configurations. If all else fails, I may need to troubleshoot the underlying host system or consult Docker community forums for assistance.

#### 2. Write a docker file to copy a file from the system to container with a volume mount?
**Answer.**
```
FROM ubuntu:latest
# Create a directory in the container
WORKDIR /app
# Copy a file from the host system to the container
COPY ./localfile.txt /app/
# Define a volume mount
VOLUME /app/data
# Set the working directory
WORKDIR /app/data
```

#### 3. What is docker networks?
**Answer.** Docker Networks are vital for defining communication patterns, ensuring proper isolation, and facilitating containerized application deployment.

https://docs.docker.com/network/

#### 4. How the port forwading is done in docker?
**Answer.**
``
docker run -p 8080:80 my-web-app
``
This command forwards traffic from port 8080 on the host to port 80 in the container. Now, accessing http://localhost:8080 on the host system will be directed to the web application running on port 80 inside the container. Port forwarding enables communication between the host and containerized applications.

#### 5. Docker commands?
**Answer.** Mostly used commands:
```
docker run - run a container from an image
docker pull - pull an image from a registry
docker push - push an image to a registry
docker build - build an image from a Dockerfile
docker ps - list running containers
docker ps -a - list all containers
docker stop - stop a running container
docker start - start a stopped container
docker restart - restart a container
docker logs - show the logs of a container
docker exec -it <container-name> /bin/bash - execute a command inside a running container or to enter into running container.
docker run -d --name <container-name> -v /<host/path>:/<containerpath> <image-name> - to volume map host to container path.
docker run -d --name <container-name> -p <8086:80> <image-name> - to port mapping hostport to container port.
docker images - list available images
docker rm - remove a container
docker rmi - remove an image
docker inspect - show information about a container
docker network create - create a network for containers to communicate
docker network connect - connect a container to a network
docker network disconnect - disconnect a container from a network
docker network create -d macvlan --subnet=10.10.1.0/24 --ip-range=10.10.1.2/24 -o parent=eth0 beta - Creating a docker network named as beta, Configure it to use macvlan drivers, Set it to use subnet 10.10.1.0/24 and iprange 10.10.1.2/24.
docker port - show the mapped ports of a container
docker cp - copy files between a container and the host
docker commit - create a new image from a container's changes
docker login - log in to a registry
docker logout - log out of a registry
docker tag - tag an image with a new name
docker export - export the contents of a container as a tar archive
docker import - create a new image from a tar archive
docker save - save an image as a tar archive
docker save -o <imagename.tar> <imagename:tag> - save an image as a tar archive.
scp <file.tar? banner@stapp03:/home/banner/ - copy file.tar from one server to other server.
docker load - load an image from a tar archive
docker top - show the processes running inside a container
docker stats - show resource usage statistics of containers
docker diff - show the changes made to a container's filesystem
docker events - show the events generated by Docker
docker history - show the history of an image
docker pause - pause a running container
docker unpause - unpause a paused container
docker kill - send a signal to a container to stop it abruptly
docker wait - wait for a container to exit and return its exit code
docker attach - attach to a running container's console
docker buildx - build and push multi-platform images
docker compose - manage multi-container applications with Docker Compose
docker swarm - create and manage a cluster of Docker nodes
docker volume create - create a named volume for persistent data storage
docker volume ls - list available volumes
docker volume rm - remove a named volume
docker system prune - remove all unused objects from Docker
docker system df - show the usage of Docker objects
docker system events - show the events generated by Docker on the system
docker system info - show the system-wide information about Docker
docker system inspect - show detailed information about Docker objects
docker system logs - show the system logs of Docker
docker system version - show the version of Docker installed on the system
```

#### 6. What is difference between CMD and ENTRYPOINT?
**Answer.** In Docker, ENTRYPOINT is used to set the default executable for a container, defining the command and its arguments. It is often used for the main application process. On the other hand, CMD is used to provide default command-line arguments for the ENTRYPOINT or the default command to be executed if ENTRYPOINT is not specified. Both are instructions in a Dockerfile, but ENTRYPOINT is primarily for setting the main executable, while CMD is for providing default parameters or a fallback command.

#### 7. How docker is integrated in jenkins
**Answer.** Docker is integrated into Jenkins through the Docker Pipeline plugin. This plugin enables the use of Docker containers within Jenkins pipelines, allowing developers to define, build, and run their applications in isolated and reproducible environments. It simplifies the integration of Docker-based workflows, providing seamless containerization support in Jenkins CI/CD pipelines.

#### 8. Write a dockerfile for tomcat container?
**Answer.** 
```
FROM ubuntu
RUN apt-get update \
    && apt-get install -y open-jdk-8-jre wget \
    && rm -rf /var/lib/apt/lists/*

RUN wget https://archive.apache.org/dist/tomcat/tomcat-9/v9.0.59/bin/apache-tomcat-9.0.59.tar.gz \
    && tar -xf apache-tomcat-9.0.59.tar.gz -C /opt \
    && ln -s /opt/apache-tomcat-9.0.59 /opt/tomcat \
    && rm apache-tomcat-9.0.59.tar.gz

EXPOSE 8080

CMD ["/opt/tomcat/bin/catalina.sh", "run"]
```

#### 9. Write a docker file for java application?
**Answer.** 
```
# Use an official OpenJDK runtime as a base image
FROM openjdk:11-jre-slim

# Set the working directory in the container
WORKDIR /app

# Copy the JAR file into the container at /app
COPY target/your-java-app.jar /app/your-java-app.jar

# Specify the default command to run when the container starts
CMD ["java", "-jar", "your-java-app.jar"]
```

#### 10. Difference between docker stop and docker kill?
**Answer.** docker stop initiates a graceful shutdown, while docker kill forcefully terminates the container without giving it a chance to clean up.

#### 11. Command to list continers which state is exited?
**Answer.** This command shows all containers (including those that have exited) and filters the output to display only containers with the "exited" status. The -a flag ensures that both running and exited containers are considered.
```
docker ps -a --filter "status=exited"
```

#### 12. Command to clean-up docker host ( deleting stopped conatiners, dangling images and unused networks)?
**Answer.** 
`docker container prune -f`: Deletes all stopped containers.
`docker image prune -f`: Removes dangling images (images with no tag).
`docker network prune -f`: Deletes unused networks.
Make sure to use these commands cautiously, as they will irreversibly remove the specified resources. The -f flag is used to force the removal without interactive confirmation.

#### 13. What version of docker you have used? Specific reason to use that particular version?
**Answer.** I have used 20.10.17 docker version. There is no particular reason.

#### 14. Can we have multiple CMD in Dockerfile?
**Answer.** No, a Dockerfile can only have one CMD instruction. If you include multiple CMD instructions, only the last one will take effect.

#### 15. Have you worked on docker swarm and docker compose?
**Answer.** Yes, I have experience working with Docker Swarm and Docker Compose. Docker Swarm is used for orchestrating and managing distributed Docker applications, providing features like service scaling and load balancing. Docker Compose is a tool for defining and running multi-container Docker applications, simplifying the process of setting up and running complex services.

#### 16. Difference between docker attach and docker exec?
**Answer. docker attach** is used to connect to a running container's main process and take control of its input and output.

**docker exec** is used to run a command inside a running container without changing its main process, allowing for more flexibility in executing commands and interacting with containerized applications.

#### 17. How will you run multiple Docker containers in one single host? 
**Answer:** Docker Compose is the best way to run multiple containers as a single service by defining them in a docker-compose.yml file.

#### 18. If you delete a running container, what happens to the data stored in that container? 
**Answer:** When a running container is deleted, all data in its file system also goes away. However, we can use Docker Data Volumes to persist data even if the container is deleted.

#### 19. How do you manage sensitive security data like passwords in Docker? 
**Answer:** Docker Secrets and Docker Environment Variables can be used to manage sensitive data.

#### 20. What is the difference between Docker Image and a Docker Container? 
**Answer:** Docker Image is a template that contains the application, libraries, and dependencies required to run an application, whereas a Docker Container is the running instance of a Docker Image.

#### 21. How do you handle persistent storage in Docker? 
**Answer:** Docker Volumes and Docker Bind Mounts are used to handle persistent storage in Docker.

#### 22. What is the process to create a Docker Container from a Dockerfile? 
**Answer:** Docker Build command is used to create Docker images from a Dockerfile and then Docker Run command is used to create Containers from Docker images.

#### 23. How will you scale Docker containers based on traffic to your application? 
**Answer:** Docker Swarm or Kubernetes can be used to auto-scale Docker Containers based on traffic load.

#### 24. When RUN and CMD instructions will be executed?
**Answer:** RUN instruction will be executed while building the Docker Image. CMD instruction will be executed while starting the Container.

#### 25. What’s the different between COPY and ADD instructions?
**Answer:** Using COPY instruction,We can copy local files and folders from docker build context to Docker Image. These files and folders will be copied while creating a Docker Image.
ADD instruction works similar to COPY instruction but the only different is that we can download files from remote locations(Git GitHub, S3, URL) that’s from Internet while creating a Docker Image.

#### 26. What’s the different between CMD and ENTRYPOINT instructions?
**Answer:** CMD instruction will be used to start the process or application inside the Container.
ENTRYPOINT instruction also works similar to CMD instruction. ENTRYPOINT instruction will also be executed while creating a container. CMD instruction can be overridden while creating a Container where as ENTRYPOINT instruction cannot be overridden while creating a Container.

#### 27. When we have both CMD and ENTRYPOINT instructions in a Dockerfile?
**Answer:** CMD instruction will not be executed and CMD instruction will be passed as an argument for ENTRYPOINT.

#### 28. Is Docker container itself or container runtime?
**Answer:** Docker is a container runtime. It provides a platform for building, managing, and running containers, which are lightweight, portable, and self-sufficient environments for running applications. The Docker runtime enables the creation and execution of containers based on Docker images, which contain all the necessary dependencies and configurations to run an application.

#### 29. Why would you use Docker? Over a virtual machine and give an example?
**Answer:** Docker provides lightweight, portable containers for running applications, offering benefits such as efficient resource utilization, faster deployment, and consistent environments. Compared to virtual machines, Docker containers have lower overhead and faster startup times. For example, if you want to run a web application, you can use Docker to package the application and its dependencies into a container, ensuring consistent behavior across different environments.

#### 30. Let's say I have like okay, I have a Docker image in Docker Hub. And I want to, like use that image to start a Docker container on your local laptop or an EC2 instance what command would we use?
**Answer:** To start a Docker container from an image available on Docker Hub, you can use the docker run command followed by the image name. For example: docker run <image_name>.

#### 31. If I want to create an Docker image. What command would I use?
**Answer:** To create a Docker image, you can use the docker build command followed by the path to the Dockerfile and an optional tag for the image. For example: docker build -t <image_name> <path_to_Dockerfile>.

#### 32. What's the difference between Docker build and Docker Compose?
**Answer:** Docker build is used to build Docker images from a Dockerfile, while Docker Compose is used to define and run multi-container Docker applications. Docker Compose uses a YAML file (docker-compose.yml) to specify the services, networks, and volumes required for the application, making it easier to manage complex deployments with multiple interconnected containers.

#### 33. For example, let's say you have X number of Docker containers running on a machine right and maybe an instant easy to instance or server or whatever. How would you check those containers like what command would you use?
**Answer:** To check running Docker containers, you can use the docker ps command. This command lists all running containers along with their IDs, names, status, ports, and other details.

#### 34. Let's say there was seven containers running on a machine out of those two stops for some reason. And someone asks you like hey, can we check what happened to those two containers? Like what can you do from here to see why those two containers stopped?
**Answer:** If containers have stopped unexpectedly, you can use the docker ps -a command to list all containers, including stopped ones. Then, you can use the docker logs <container_id> command to view the logs of a specific container and identify the reason for its failure.

#### 35. Let's say paint shop for whatever reasons. And someone asks you like hey, can we check what happened there? How would you approach?
**Answer:** To investigate why a container failed, you can inspect its logs using the docker logs <container_id> command. Additionally, you can check the container's exit code using the docker inspect --format='{{.State.ExitCode}}' <container_id> command to get more information about the reason for its failure.

#### 36. Alternative tools for Docker?
**Answer:** LXD, Buildah, Kaniko, and Podman. You can choose alternative runtimes such as Containerd, CRI-O, or others to run containers in a Kubernetes cluster.

#### 37. Dockerfile to create image ls -lrth in user1 and ls - la in user2 to executed how to do?
**Answer:** 
 
#### 38. ⁠docker drivers?
**Answer:** 
Storage Drivers: These manage how images and containers are stored on disk. Some common storage drivers include:
- OverlayFS: Used on Linux systems, OverlayFS is a union filesystem that allows layers of filesystems to be stacked transparently.
- Device Mapper: Another option for Linux systems, Device Mapper creates thin provisions for Docker containers.
- AUFS (Another Union File System): Previously popular but now deprecated in favor of OverlayFS.
- ZFS: Supported on certain platforms, ZFS is a combined filesystem and logical volume manager.

Networking Drivers: These manage how containers communicate with each other and the outside world. Docker provides several networking drivers, including:
- Bridge: The default network driver, creates a virtual bridge that connects containers on the same host.
- Overlay: Facilitates communication between containers across multiple Docker daemons or hosts.
- Host: Removes network isolation between the container and the Docker host, allowing containers to use the host's network stack directly.
- Macvlan: Allows containers to have their own MAC address, making them appear as physical devices on the network.
- IPvlan: Similar to Macvlan but more lightweight, it assigns multiple virtual interfaces to a single parent interface.

Choosing the right drivers depends on factors such as performance requirements, compatibility with your infrastructure, and specific use cases.

#### 39. ⁠If we are having same name of containers with same port can we achieve this? How?
**Answer:** No, with same name of containers we can't achieve this. 

#### 40. ⁠how docker created from kernel? What is the kernels which used to create docker?
**Answer:** Docker itself is not created from the kernel. Instead, Docker relies on certain features provided by the Linux kernel to implement containerization.

#### 41. How can I reduce docker size
**Answer:** To reduce Docker image size:
- Use slim base images.
- Minimize layers and combine RUN commands.
- Remove unnecessary dependencies and files.
- Utilize multi-stage builds.
- Compress files within the image.
- Use .dockerignore to exclude unnecessary files from the build context.
- Optimize Dockerfile instructions for efficiency.

#### 42. Different Docker runlevels?
**Answer:** Docker doesn't have traditional "runlevels" like Linux distributions. Instead, it follows stages: create, build, run, stop/start, and remove for managing containers.


#### 43. How do you manage data persistence in Docker containers?
**Answer:** To manage data persistence in Docker containers:

- Use volumes to store data separately from containers. They persist even if containers are removed.
- Bind mounts link host paths to container paths, allowing shared access to files.
- Dockerfile VOLUME instruction declares paths as volumes for data persistence.
- Avoid data containers for new projects; prefer volumes or bind mounts for simplicity and flexibility.

#### 44. How do you secure a MySQL Data which is Running in my container?
**Answer:**
- Use a Secure Base Image: Start with a trusted MySQL Docker image.
- Set Strong Passwords: Use environment variables (MYSQL_ROOT_PASSWORD) to set a strong root password.
- Persistent Storage: Use Docker volumes to store MySQL data outside the container.
- Limit User Privileges: Create MySQL users with minimal necessary privileges.
- Network Security: Bind MySQL to localhost (127.0.0.1) inside the container for local access only.
- Regular Updates: Keep MySQL and Docker images updated with security patches.

#### 45. Docker Cost Optimization?
**Answer:**
To optimize Docker costs:

Right-sizing: Allocate resources based on actual application needs to avoid over-provisioning.

Efficient Images: Use lean Docker images by minimizing layers and dependencies to reduce storage and deployment costs.

Auto-scaling: Implement auto-scaling to adjust container resources based on workload demand, minimizing idle resources.

Monitoring: Monitor resource usage and costs regularly to identify and address inefficiencies.

Cloud Optimization: Choose cost-effective cloud services for Docker registries, compute instances, and storage.

1. You are running a containerized application that crashes intermittently without logging anything useful. How do you debug this behavior?

2. Your CI/CD pipeline pushes a new Docker image that fails only in production, not in staging. How would you isolate and resolve the discrepancy?

3. Your Docker image builds are inconsistent across developers’ machines. How would you ensure repeatable builds?

4. How would you securely inject secrets into a container without hardcoding them in Dockerfile or exposing them in environment variables?

5. A container using a volume is not syncing changes back to the host machine. How do you diagnose and resolve this?

6. You need to migrate your local Docker-based app to Kubernetes. What Docker-specific configurations might cause issues during the migration?

7. Your container uses a large base image and takes a long time to download in remote environments. What strategies can you apply to improve this?

8. You notice a container has exited with an OOMKilled (Out Of Memory) status. How do you investigate and prevent this?

9. How would you monitor file system usage and inode exhaustion in a running container?

10. Your team needs to run GPU-based containers on a shared host. How do you design a secure and performant setup?

11. You want to roll back to a previous container version but don't have the previous Dockerfile. How do you retrieve and use the old image?

12. You need to isolate a set of containers with custom firewall rules. How do you implement this using Docker’s networking capabilities?

13. A container exposes multiple ports, but some are not accessible externally. How do you verify and expose the correct ports?

14. How do you configure Docker for a multi-architecture build (e.g., building for x86 and ARM simultaneously)?

15. Your Dockerfile uses ADD to fetch remote URLs, but the builds fail due to SSL errors in CI. How do you debug and solve this?

16. You notice layers in your Docker image are not being cached during builds. What could be causing this?

17. You are required to enforce immutability for Docker containers in production. How would you approach this?

18. How would you implement a security scanning workflow integrated with your CI/CD process for Docker containers?

19. What would you do if Docker container logs are rotated too frequently and important logs are being lost?

20. You suspect your container image has been tampered with. How do you validate its authenticity?

21. How do you enforce policy controls such as image whitelisting in a Docker deployment?

22. A base image you use has been deprecated. How do you manage and migrate all dependent services with minimal downtime?
